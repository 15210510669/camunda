- name: Install add-apt-repository
  apt:
    name: software-properties-common
    state: latest
  become: yes

- name: Add Oracle Java Repository (PPA)
  apt_repository:
    repo: 'ppa:webupd8team/java'
  become: yes

- name: "Accept Java {{ java_version }} License"
  debconf:
    name: "oracle-java{{ java_version }}-installer"
    question: 'shared/accepted-oracle-license-v1-1'
    value: 'true'
    vtype: 'select'
  become: yes

- name: "Install Oracle Java {{ java_version }}"
  apt:
    name: "{{ item }}"
    state: latest
  with_items:
    - "oracle-java{{ java_version }}-installer"
    - ca-certificates
    - "oracle-java{{ java_version }}-set-default"
  become: yes
