openapi: "3.1.0"
info:
  title: Zeebe REST API
  version: "0.1"
  description: API for communicating with the Zeebe cluster.
  license:
    name: Zeebe Community License Version 1.1
    url: https://github.com/camunda/zeebe/blob/main/licenses/ZEEBE-COMMUNITY-LICENSE-1.1.txt
externalDocs:
  description: Find out more
  url: https://docs.camunda.io/docs/apis-tools/zeebe-api-rest/overview/

servers:
  - url: "{schema}://{host}:{port}/api/v1"
    variables:
      host:
        default: localhost
        description: The hostname of a Zeebe Gateway.
      port:
        default: "8080"
        description: The port of the Zeebe REST API server.
      schema:
        default: http
        description: The schema of the Zeebe REST API server.

paths:
  /topology:
    get:
      summary: Get cluster topology.
      description: Obtains the current topology of the cluster the gateway is part of.
      responses:
        '200':
          $ref: '#/components/responses/TopologyResponse'

components:
  responses:
    TopologyResponse:
      description: Obtains the current topology of the cluster the gateway is part of.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TopologyResponse'

  schemas:
    TopologyResponse:
      description: The response of a topology request.
      type: object
      properties:
        brokers:
          description: A list of brokers that are part of this cluster.
          type: array
          nullable: true
          items:
            $ref: "#/components/schemas/BrokerInfo"
        clusterSize:
          description: The number of brokers in the cluster.
          type: integer
          format: int32
          nullable: true
        partitionsCount:
          description: The number of partitions are spread across the cluster.
          type: integer
          format: int32
          nullable: true
        replicationFactor:
          description: The configured replication factor for this cluster.
          type: integer
          format: int32
          nullable: true
        gatewayVersion:
          description: The version of the Zeebe Gateway.
          type: string
          nullable: true
    BrokerInfo:
      description: Provides information on a broker node.
      type: object
      properties:
        nodeId:
          description: The unique (within a cluster) node ID for the broker.
          type: integer
          format: int32
        host:
          description: The hostname for reaching the broker.
          type: string
        port:
          description: The port for reaching the broker.
          type: integer
          format: int32
        partitions:
          description: A list of partitions managed or replicated on this broker.
          type: array
          items:
            $ref: "#/components/schemas/Partition"
        version:
          description: The broker version.
          type: string
    Partition:
      description: Provides information on a partition within a broker node.
      type: object
      properties:
        partitionId:
          description: The unique ID of this partition.
          type: integer
          format: int32
        role:
          description:  Describes the Raft role of the broker for a given partition.
          type: string
          enum:
            - leader
            - follower
            - inactive
        health:
          description: Describes the current health of the partition.
          type: string
          enum:
            - healthy
            - unhealthy
            - dead


